!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],e):"object"==typeof exports?exports.IntegrationService=e(require("jQuery")):(t.Wildix=t.Wildix||{},t.Wildix.IntegrationService=e(t.jQuery))}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=14)}([function(t,e,n){(function(i){var r,o;!function(s){var a="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i;r=[n(2),n(17),e],void 0!==(o=function(t,e,n){a.Backbone=s(a,n,t,e)}.apply(e,r))&&(t.exports=o)}(function(t,e,n,i){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.0",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},c=/\s+/,u=function(t,e,i,r,o){var s,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=n.keys(i);a<s.length;a++)e=u(t,e,s[a],i[s[a]],o)}else if(i&&c.test(i))for(s=i.split(c);a<s.length;a++)e=t(e,s[a],r,o);else e=t(e,i,r,o);return e};a.on=function(t,e,n){if(this._events=u(l,this._events||{},t,e,{context:n,ctx:this,listening:s}),s){(this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1}return this},a.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=s=o[r];a||(this._listenId||(this._listenId=n.uniqueId("l")),a=s=o[r]=new g(this,t));var c=h(t,e,i,this);if(s=void 0,c)throw c;return a.interop&&a.on(e,i),this};var l=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return t},h=function(t,e,n,i){try{t.on(e,n,i)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=u(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:n.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(e,i,this),a.interop&&a.off(e,i)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var f=function(t,e,i,r){if(t){var o,s=r.context,a=r.listeners,c=0;if(e||s||i){for(o=e?[e]:n.keys(t);c<o.length;c++){e=o[c];var u=t[e];if(!u)break;for(var l=[],h=0;h<u.length;h++){var f=u[h];if(i&&i!==f.callback&&i!==f.callback._callback||s&&s!==f.context)l.push(f);else{var d=f.listening;d&&d.off(e,i)}}l.length?t[e]=l:delete t[e]}return t}for(o=n.keys(a);c<o.length;c++)a[o[c]].cleanup()}};a.once=function(t,e,n){var i=u(d,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(i,e,n)},a.listenToOnce=function(t,e,n){var i=u(d,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,i)};var d=function(t,e,i,r){if(i){var o=t[e]=n.once(function(){r(e,o),i.apply(this,arguments)});o._callback=i}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return u(p,this._events,t,void 0,n),this};var p=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&v(r,i),o&&v(o,[e].concat(i))}return t},v=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},g=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=a.on,g.prototype.off=function(t,e){var n;this.interop?(this._events=u(f,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var m=e.Model=function(t,e){var i=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(m.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,s=i.silent,a=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in r)e=r[f],n.isEqual(u[f],e)||a.push(f),n.isEqual(h[f],e)?delete l[f]:l[f]=e,o?delete u[f]:u[f]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=i);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,u[a[d]],i)}if(c)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,i=this._changing?this._previousAttributes:this.attributes,r={};for(var o in t){var s=t[o];n.isEqual(i[o],s)||(r[o]=s,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;if(!e.set(r,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},G(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,a=i.success,c=this.attributes;i.success=function(t){s.attributes=c;var e=i.parse?s.parse(t,i):t;if(o&&(e=n.extend({},r,e)),e&&!s.set(e,i))return!1;a&&a.call(i.context,s,t,i),s.trigger("sync",s,t,i)},G(this,i),r&&o&&(this.attributes=n.extend({},c,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var l=this.sync(u,this,i);return this.attributes=c,l},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&o(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(G(this,t),s=this.sync("delete",this,t)),r||o(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||V();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var _=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},x=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),o=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<o;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+o+n]=r[i]};n.extend(_.prototype,a,{model:m,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,y))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){e=n.extend({},b,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],c=[],u=[],l=[],h={},f=e.add,d=e.merge,p=e.remove,v=!1,g=this.comparator&&null==r&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var _=this.get(o);if(_){if(d&&o!==_){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=_.parse(y,e)),_.set(y,e),u.push(_),g&&!v&&(v=_.hasChanged(m))}h[_.cid]||(h[_.cid]=!0,a.push(_)),t[s]=_}else f&&(o=t[s]=this._prepareModel(o,e))&&(c.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)o=this.models[s],h[o.cid]||l.push(o);l.length&&this._removeModels(l,e)}var S=!1,w=!g&&f&&p;if(a.length&&w?(S=this.length!==a.length||n.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,x(this.models,a,0),this.length=this.models.length):c.length&&(g&&(v=!0),x(this.models,c,null==r?this.length:r),this.length=this.models.length),v&&this.sort({silent:!0}),!e.silent){for(s=0;s<c.length;s++)null!=r&&(e.index=r+s),o=c[s],o.trigger("add",o,this,e);(v||S)&&this.trigger("sort",this,e),(c.length||l.length||u.length)&&(e.changes={added:c,removed:l,merged:u},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},G(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new w(this,C)},keys:function(){return new w(this,E)},entries:function(){return new w(this,k)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var S="function"==typeof Symbol&&Symbol.iterator;S&&(_.prototype[S]=_.prototype.values);var w=function(t,e){this._collection=t,this._kind=e,this._index=0},C=1,E=2,k=3;S&&(w.prototype[S]=function(){return this}),w.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t=this._collection.at(this._index);this._index++;var e;if(this._kind===C)e=t;else{var n=this._collection.modelId(t.attributes);e=this._kind===E?n:[n,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var A=e.View=function(t){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,O)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];n.extend(A.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(I);this.delegate(r[1],r[2],i.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var R=function(t,e,n,i){switch(e){case 1:return function(){return t[n](this[i])};case 2:return function(e){return t[n](this[i],e)};case 3:return function(e,r){return t[n](this[i],j(e,this),r)};case 4:return function(e,r,o){return t[n](this[i],j(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),t[n].apply(t,e)}}},M=function(t,e,i,r){n.each(i,function(n,i){e[i]&&(t.prototype[i]=R(e,n,i,r))})},j=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?T(t):n.isString(t)?function(e){return e.get(t)}:t},T=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},P={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},N={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[_,P,"models"],[m,N,"attributes"]],function(t){var e=t[0],i=t[1],r=t[2];e.mixin=function(t){var i=n.reduce(n.functions(t),function(t,e){return t[e]=0,t},{});M(e,t,i,r)},M(e,n,i,r)}),e.sync=function(t,i,r){var o=W[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||V()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var c=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,c&&c.call(r.context,t,e,n)};var u=r.xhr=e.ajax(n.extend(s,r));return i.trigger("request",i,u,r),u};var W={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var z=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,U=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(z.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);!1!==o.execute(r,s,i)&&(o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),e.history.trigger("route",o,i,s))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(F,"(?:$1)?").replace(L,function(t,e){return e?t:"([^/?]+)"}).replace(U,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var H=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},q=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,B=/#.*$/;H.started=!1,n.extend(H.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(q,"")},start:function(t){if(H.started)throw new Error("Backbone.history has already been started");if(H.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace($,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!H.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;t=t.replace(B,"");var r=this.decodeFragment(t);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new H;var J=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};m.extend=_.extend=z.extend=A.extend=H.extend=J;var V=function(){throw new Error('A "url" property or function must be specified')},G=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e})}).call(e,n(5))},function(t,e,n){var i,r;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(o){"use strict";var s={};s.VERSION="1.6.0";var a,c={},u=function(t,e){return function(){return e.apply(t,arguments)}},l=function(){var t,e,n=arguments,i=n[0];for(e=1;e<n.length;e++)for(t in n[e])t in i||!n[e].hasOwnProperty(t)||(i[t]=n[e][t]);return i},h=function(t,e){return{value:t,name:e}};s.TRACE=h(1,"TRACE"),s.DEBUG=h(2,"DEBUG"),s.INFO=h(3,"INFO"),s.TIME=h(4,"TIME"),s.WARN=h(5,"WARN"),s.ERROR=h(8,"ERROR"),s.OFF=h(99,"OFF");var f=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};f.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(s.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(s.TIME,[t,"end"])},invoke:function(t,e){a&&this.enabledFor(t)&&a(e,l({level:t},this.context))}};var d=new f({filterLevel:s.OFF});!function(){var t=s;t.enabledFor=u(d,d.enabledFor),t.trace=u(d,d.trace),t.debug=u(d,d.debug),t.time=u(d,d.time),t.timeEnd=u(d,d.timeEnd),t.info=u(d,d.info),t.warn=u(d,d.warn),t.error=u(d,d.error),t.log=t.info}(),s.setHandler=function(t){a=t},s.setLevel=function(t){d.setLevel(t);for(var e in c)c.hasOwnProperty(e)&&c[e].setLevel(t)},s.getLevel=function(){return d.getLevel()},s.get=function(t){return c[t]||(c[t]=new f(l({name:t},d.context)))},s.createDefaultHandler=function(t){t=t||{},t.formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},n=function(t,e){Function.prototype.apply.call(t,console,e)};return"undefined"==typeof console?function(){}:function(i,r){i=Array.prototype.slice.call(i);var o,a=console.log;r.level===s.TIME?(o=(r.name?"["+r.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(o):e[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-e[o])+"ms"])):(r.level===s.WARN&&console.warn?a=console.warn:r.level===s.ERROR&&console.error?a=console.error:r.level===s.INFO&&console.info?a=console.info:r.level===s.DEBUG&&console.debug?a=console.debug:r.level===s.TRACE&&console.trace&&(a=console.trace),t.formatter(i,r),n(a,i))}},s.useDefaults=function(t){s.setLevel(t&&t.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(t))},i=s,void 0!==(r="function"==typeof i?i.call(e,n,e,t):i)&&(t.exports=r)}()},function(t,e,n){(function(t,n){var i,r;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},s=o._,a=Array.prototype,c=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,h=a.slice,f=c.toString,d=c.hasOwnProperty,p=Array.isArray,v=Object.keys,g=Object.create,m=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};void 0===e||e.nodeType?o._=_:(void 0!==n&&!n.nodeType&&n.exports&&(e=n.exports=_),e._=_),_.VERSION="1.9.1";var b,y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,n){return _.iteratee!==b?_.iteratee(t,e):null==t?_.identity:_.isFunction(t)?y(t,e,n):_.isObject(t)&&!_.isArray(t)?_.matcher(t):_.property(t)};_.iteratee=b=function(t,e){return x(t,e,1/0)};var S=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=i,t.apply(this,o)}},w=function(t){if(!_.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&d.call(t,e)},k=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},A=Math.pow(2,53)-1,I=C("length"),O=function(t){var e=I(t);return"number"==typeof e&&e>=0&&e<=A};_.each=_.forEach=function(t,e,n){e=y(e,n);var i,r;if(O(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=_.keys(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t},_.map=_.collect=function(t,e,n){e=x(e,n);for(var i=!O(t)&&_.keys(t),r=(i||t).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o};var R=function(t){var e=function(e,n,i,r){var o=!O(e)&&_.keys(e),s=(o||e).length,a=t>0?0:s-1;for(r||(i=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;i=n(i,e[c],c,e)}return i};return function(t,n,i,r){var o=arguments.length>=3;return e(t,y(n,r,4),i,o)}};_.reduce=_.foldl=_.inject=R(1),_.reduceRight=_.foldr=R(-1),_.find=_.detect=function(t,e,n){var i=O(t)?_.findIndex:_.findKey,r=i(t,e,n);if(void 0!==r&&-1!==r)return t[r]},_.filter=_.select=function(t,e,n){var i=[];return e=x(e,n),_.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},_.reject=function(t,e,n){return _.filter(t,_.negate(x(e)),n)},_.every=_.all=function(t,e,n){e=x(e,n);for(var i=!O(t)&&_.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(!e(t[s],s,t))return!1}return!0},_.some=_.any=function(t,e,n){e=x(e,n);for(var i=!O(t)&&_.keys(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(e(t[s],s,t))return!0}return!1},_.contains=_.includes=_.include=function(t,e,n,i){return O(t)||(t=_.values(t)),("number"!=typeof n||i)&&(n=0),_.indexOf(t,e,n)>=0},_.invoke=S(function(t,e,n){var i,r;return _.isFunction(e)?r=e:_.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),_.map(t,function(t){var o=r;if(!o){if(i&&i.length&&(t=k(t,i)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)})}),_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matcher(e))},_.findWhere=function(t,e){return _.find(t,_.matcher(e))},_.max=function(t,e,n){var i,r,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=O(t)?t:_.values(t);for(var a=0,c=t.length;a<c;a++)null!=(i=t[a])&&i>o&&(o=i)}else e=x(e,n),_.each(t,function(t,n,i){((r=e(t,n,i))>s||r===-1/0&&o===-1/0)&&(o=t,s=r)});return o},_.min=function(t,e,n){var i,r,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=O(t)?t:_.values(t);for(var a=0,c=t.length;a<c;a++)null!=(i=t[a])&&i<o&&(o=i)}else e=x(e,n),_.each(t,function(t,n,i){((r=e(t,n,i))<s||r===1/0&&o===1/0)&&(o=t,s=r)});return o},_.shuffle=function(t){return _.sample(t,1/0)},_.sample=function(t,e,n){if(null==e||n)return O(t)||(t=_.values(t)),t[_.random(t.length-1)];var i=O(t)?_.clone(t):_.values(t),r=I(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,s=0;s<e;s++){var a=_.random(s,o),c=i[s];i[s]=i[a],i[a]=c}return i.slice(0,e)},_.sortBy=function(t,e,n){var i=0;return e=x(e,n),_.pluck(_.map(t,function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t,e){return function(n,i,r){var o=e?[[],[]]:{};return i=x(i,r),_.each(n,function(e,r){var s=i(e,r,n);t(o,e,s)}),o}};_.groupBy=M(function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]}),_.indexBy=M(function(t,e,n){t[n]=e}),_.countBy=M(function(t,e,n){E(t,n)?t[n]++:t[n]=1});var j=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(t){return t?_.isArray(t)?h.call(t):_.isString(t)?t.match(j):O(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:O(t)?t.length:_.keys(t).length},_.partition=M(function(t,e,n){t[n?0:1].push(e)},!0),_.first=_.head=_.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:_.initial(t,t.length-e)},_.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},_.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:_.rest(t,Math.max(0,t.length-e))},_.rest=_.tail=_.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,Boolean)};var T=function(t,e,n,i){i=i||[];for(var r=i.length,o=0,s=I(t);o<s;o++){var a=t[o];if(O(a)&&(_.isArray(a)||_.isArguments(a)))if(e)for(var c=0,u=a.length;c<u;)i[r++]=a[c++];else T(a,e,n,i),r=i.length;else n||(i[r++]=a)}return i};_.flatten=function(t,e){return T(t,e,!1)},_.without=S(function(t,e){return _.difference(t,e)}),_.uniq=_.unique=function(t,e,n,i){_.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=x(n,i));for(var r=[],o=[],s=0,a=I(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&o===u||r.push(c),o=u):n?_.contains(o,u)||(o.push(u),r.push(c)):_.contains(r,c)||r.push(c)}return r},_.union=S(function(t){return _.uniq(T(t,!0,!0))}),_.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=I(t);i<r;i++){var o=t[i];if(!_.contains(e,o)){var s;for(s=1;s<n&&_.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},_.difference=S(function(t,e){return e=T(e,!0,!0),_.filter(t,function(t){return!_.contains(e,t)})}),_.unzip=function(t){for(var e=t&&_.max(t,I).length||0,n=Array(e),i=0;i<e;i++)n[i]=_.pluck(t,i);return n},_.zip=S(_.unzip),_.object=function(t,e){for(var n={},i=0,r=I(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var P=function(t){return function(e,n,i){n=x(n,i);for(var r=I(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}};_.findIndex=P(1),_.findLastIndex=P(-1),_.sortedIndex=function(t,e,n,i){n=x(n,i,1);for(var r=n(e),o=0,s=I(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o};var N=function(t,e,n){return function(i,r,o){var s=0,a=I(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=e(h.call(i,s,a),_.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(i[o]===r)return o;return-1}};_.indexOf=N(1,_.findIndex,_.sortedIndex),_.lastIndexOf=N(-1,_.findLastIndex),_.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r},_.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(h.call(t,i,i+=e));return n};var W=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=w(t.prototype),s=t.apply(o,r);return _.isObject(s)?s:o};_.bind=S(function(t,e,n){if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var i=S(function(r){return W(t,i,e,this,n.concat(r))});return i}),_.partial=S(function(t,e){var n=_.partial.placeholder,i=function(){for(var r=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)s.push(arguments[r++]);return W(t,i,this,this,s)};return i}),_.partial.placeholder=_,_.bindAll=S(function(t,e){e=T(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=_.bind(t[i],t)}}),_.memoize=function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return E(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},_.delay=S(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),_.defer=_.partial(_.delay,_,1),_.throttle=function(t,e,n){var i,r,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:_.now(),i=null,s=t.apply(r,o),i||(r=o=null)},u=function(){var u=_.now();a||!1!==n.leading||(a=u);var l=e-(u-a);return r=this,o=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),a=u,s=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(i),a=0,i=r=o=null},u},_.debounce=function(t,e,n){var i,r,o=function(e,n){i=null,n&&(r=t.apply(e,n))},s=S(function(s){if(i&&clearTimeout(i),n){var a=!i;i=setTimeout(o,e),a&&(r=t.apply(this,s))}else i=_.delay(o,e,this,s);return r});return s.cancel=function(){clearTimeout(i),i=null},s},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},_.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},_.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},_.once=_.partial(_.before,2),_.restArguments=S;var z=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(t,e){var n=F.length,i=t.constructor,r=_.isFunction(i)&&i.prototype||c,o="constructor";for(E(t,o)&&!_.contains(e,o)&&e.push(o);n--;)(o=F[n])in t&&t[o]!==r[o]&&!_.contains(e,o)&&e.push(o)};_.keys=function(t){if(!_.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return z&&L(t,e),e},_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var n in t)e.push(n);return z&&L(t,e),e},_.values=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},_.mapObject=function(t,e,n){e=x(e,n);for(var i=_.keys(t),r=i.length,o={},s=0;s<r;s++){var a=i[s];o[a]=e(t[a],a,t)}return o},_.pairs=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},_.invert=function(t){for(var e={},n=_.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()};var U=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],s=t(o),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=o[u])}return n}};_.extend=U(_.allKeys),_.extendOwn=_.assign=U(_.keys),_.findKey=function(t,e,n){e=x(e,n);for(var i,r=_.keys(t),o=0,s=r.length;o<s;o++)if(i=r[o],e(t[i],i,t))return i};var D=function(t,e,n){return e in n};_.pick=S(function(t,e){var n={},i=e[0];if(null==t)return n;_.isFunction(i)?(e.length>1&&(i=y(i,e[1])),e=_.allKeys(t)):(i=D,e=T(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var s=e[r],a=t[s];i(a,s,t)&&(n[s]=a)}return n}),_.omit=S(function(t,e){var n,i=e[0];return _.isFunction(i)?(i=_.negate(i),e.length>1&&(n=e[1])):(e=_.map(T(e,!1,!1),String),i=function(t,n){return!_.contains(e,n)}),_.pick(t,i,n)}),_.defaults=U(_.allKeys,!0),_.create=function(t,e){var n=w(t);return e&&_.extendOwn(n,e),n},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t},_.isMatch=function(t,e){var n=_.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var H,q;H=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&q(t,e,n,i)},q=function(t,e,n,i){t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=f.call(t);if(r!==f.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e)}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!H(t[c],e[c],n,i))return!1}else{var l,h=_.keys(t);if(c=h.length,_.keys(e).length!==c)return!1;for(;c--;)if(l=h[c],!E(e,l)||!H(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0},_.isEqual=function(t,e){return H(t,e)},_.isEmpty=function(t){return null==t||(O(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length)},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=p||function(t){return"[object Array]"===f.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){_["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return E(t,"callee")});var $=o.document&&o.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof $&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return!_.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&isNaN(t)},_.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){if(!_.isArray(e))return E(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!d.call(t,r))return!1;t=t[r]}return!!n},_.noConflict=function(){return o._=s,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=function(t){return _.isArray(t)?function(e){return k(e,t)}:C(t)},_.propertyOf=function(t){return null==t?function(){}:function(e){return _.isArray(e)?k(t,e):t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(t,e,n){var i=Array(Math.max(0,t));e=y(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},J=_.invert(B),V=function(t){var e=function(e){return t[e]},n="(?:"+_.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};_.escape=V(B),_.unescape=V(J),_.result=function(t,e,n){_.isArray(e)||(e=[e]);var i=e.length;if(!i)return _.isFunction(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=_.isFunction(o)?o.call(t):o}return t};var G=0;_.uniqueId=function(t){var e=++G+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(t){return"\\"+Q[t]};_.template=function(t,e,n){!e&&n&&(e=n),e=_.defaults({},e,_.templateSettings);var i=RegExp([(e.escape||K).source,(e.interpolate||K).source,(e.evaluate||K).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,s,a){return o+=t.slice(r,a).replace(X,Y),r=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var s;try{s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,_)};return a.source="function("+(e.variable||"obj")+"){\n"+o+"}",a},_.chain=function(t){var e=_(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?_(e).chain():e};_.mixin=function(t){return _.each(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),Z(this,n.apply(_,t))}}),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Z(this,n)}}),_.each(["concat","join","slice"],function(t){var e=a[t];_.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},i=[],void 0!==(r=function(){return _}.apply(e,i))&&(n.exports=r)}()}).call(e,n(5),n(16)(t))},function(t,e,n){!function(e,i){t.exports=i(n(1),n(2),n(0),n(10))}(0,function(t,e,n,i){"use strict";function r(t){this.initialize(t)}var o=t.get("IntegrationService");return r.Logger=t,r.Modules={},r.addModule=function(t,e){r.Modules[t]=e},e.extend(r.prototype,n.Events,{_options:{app:"APP_WEBCRM",name:"WebCRM",version:"0.0.1",userAgent:navigator.userAgent,platform:navigator.platform},_connectionOptions:{debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:5e3,reconnectDelay:1,timeoutInterval:3e3,maxReconnectAttempts:1},_connection:null,_macComponentVersion:{wiservice:"2.5.0"},_winComponentVersion:{wiservice:"2.5.0"},_version:null,initialize:function(t){o.info("Initialize Integration service",t),e.extend(this._options,t),this._options.app="APP_"+this._options.name.toUpperCase();for(var n in r.Modules)if(o.info("Build module:",n),"object"==typeof r.Modules[n]){var i=function(){};i.prototype=r.Modules[n],this[n]=new i,this[n].initialize(this)}else this[n]=new r.Modules[n](this);this.getConnection().on("ready",this._onReady,this),this.getConnection().on("event:wiservice",this._onEventWiservice,this),this.getConnection().on("message:"+this._options.app.toLowerCase(),this._onMessage,this),this.getConnection().on("error",this._onConnectionError,this)},Roster:null,Telephony:null,Chat:null,getConnection:function(){return null===this._connection&&(this._connection=new i(this._connectionOptions),this._connection.setAuthData(this._options)),this._connection},_ready:!1,isReady:function(){return this._ready},_onReady:function(){this._getVersion()},_countCollaborationss:0,_onEventWiservice:function(t){o.info("_onEventWiservice",t),t&&t.msgdata&&"connectionstatus"==t.msgdata.type&&(t.msgdata.disconnected&&t.msgdata.disconnected.collaboration?t.msgdata.connected&&t.msgdata.connected.collaboration||(this._collaborationStatus="disconnected",this.trigger("collaboration:"+this._collaborationStatus,this)):t.msgdata.connected&&t.msgdata.connected.collaboration&&this._countCollaborations!=t.msgdata.connected.collaboration.length&&(this._collaborationStatus="connected",this.trigger("collaboration:"+this._collaborationStatus,this)),this._countCollaborations=0,t.msgdata.connected&&t.msgdata.connected.collaboration&&(this._countCollaborations=t.msgdata.connected.collaboration.length))},_onMessage:function(t){this.trigger(t.msgdata.command,t.msgdata.msgdata)},_onConnectionError:function(){this.trigger("connection:error",this)},isConnected:function(){return this.getConnection().isConnected()},_collaborationStatus:null,getCollaborationStatus:function(){if(!this.isConnected())return null;if(null===this._collaborationStatus){var t={message:"M_WISERVICE",msgdata:{command:"getconnectionstatus"}};this.getConnection().send(t,function(t){o.info("collaboration status",t);var e=t.connected||{};e.collaboration&&e.collaboration.length>0&&(this._collaborationStatus="connected",this._countCollaborations=t.connected.collaboration.length,this.trigger("collaboration:"+this._collaborationStatus,this),this._ready=!0,this.trigger("ready",this))}.bind(this))}return this._collaborationStatus},_getVersion:function(t,e){if(!this.isConnected())return null;if(null===this._version||e){var n={message:"M_WISERVICE",msgdata:{command:"getversion"}};this.getConnection().send(n,function(t){t&&t.wiservice&&(this._version=t,this.getCollaborationStatus())}.bind(this))}return t?this._version&&this._version.hasOwnProperty(t)&&this._version[t]?this._version[t]:null:this._version}}),r})},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(0))}(0,function(t){"use strict";var n=e.get("Call");return t.Model.extend({defaults:{name:"",number:"",channel:"",destination:"",destinationType:"",direction:"",duration:"",id:"",record:"",state:"",type:""},idAttribute:"channel",initialize:function(){n.info("initialize")}})})}).call(e,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(3),n(2),n(0))}(0,function(t,n,i){"use strict";var r=e.get("Chat");t.addModule("Chat",n.extend({},i.Events,{_integrationService:null,_connection:null,initialize:function(t){r.info("Initialize"),this._integrationService=t,this._connection=this._integrationService.getConnection()},open:function(t){var e={msgdata:{type:"chat",number:t}};this._connection.send(e)}}))})}).call(e,n(1))},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(3),n(2),n(0),n(13))}(0,function(t,n,i,r){"use strict";var o=e.get("Roster");t.addModule("Roster",i.Collection.extend({model:r,_integrationService:null,_connection:null,constructor:function(t){this._integrationService=t;var e=[];arguments.length>1&&(e=arguments.slice(1)),i.Collection.apply(this,e)},initialize:function(t){o.info("initialize"),this._connection=this._integrationService.getConnection(),this._integrationService.on("collaboration:connected",this._onConnectedCollaboration,this),this._integrationService.on("setroster",this._onSetRoster,this),this._integrationService.on("updateuser",this._onUpdateUser,this),this._integrationService.on("removeuser",this._onRemoveUser,this),this._integrationService.on("adduser",this._onAddUser,this)},_subscribed:!1,isSubscribed:function(){return this._subscribed},_needSubscribe:!1,subscribe:function(){this._needSubscribe=!0,this._integrationService.isReady()&&this._subscribe()},_subscribe:function(){if(this._needSubscribe){o.info("Send subscription"),this._subscribed=!0;var t={msgdata:{type:"subscribe",event:"roster"}};this._connection.send(t)}},_prepareUser:function(t){var e=n.clone(t);return e.location=t.presence.extra.location,e.call=t.presence.extra.call,e.presence={type:t.presence.type,show:t.presence.show,status:t.presence.status,deviceShow:t.presence.extra["device-show"],until:t.presence.until},e},_onConnectedCollaboration:function(){this._subscribe()},_onSetRoster:function(t){o.info("Received roster:",t);for(var e=[],n=0;n<t.length;n++)e.push(this._prepareUser(t[n]));this.reset(e)},_onUpdateUser:function(t){o.info("Update user:",t);var e=this.get(t.id);e&&e.set(this._prepareUser(t))},_onRemoveUser:function(t){o.info("Removed user:",t);var e=this.get(t.id);e&&this.remove(e)},_onAddUser:function(t){o.info("Added user:",t),this.get(t.id)||this.add(this._prepareUser(t))}}))})}).call(e,n(1))},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(3),n(2),n(0),n(4))}(0,function(t,n,i,r){"use strict";var o=e.get("Telephony");t.addModule("Telephony",i.Collection.extend({model:r,_integrationService:null,_connection:null,constructor:function(t){this._integrationService=t;var e=[];arguments.length>1&&(e=arguments.slice(1)),i.Collection.apply(this,e)},initialize:function(){o.info("Initialize"),this._connection=this._integrationService.getConnection(),this._integrationService.on("collaboration:connected",this._onConnectedCollaboration,this),this._integrationService.on("setcalls",this._onSetCalls,this),this._integrationService.on("updatecall",this._onUpdateCall,this),this._integrationService.on("removecall",this._onRemoveCall,this),this._integrationService.on("addcall",this._onAddCall,this)},call:function(t,e){this._sendMessage("call",{number:t},e)},answer:function(t,e){this._sendMessage("answer",{channel:t},e)},hangup:function(t,e){this._sendMessage("hangup",{channel:t},e)},hold:function(t,e){this._sendMessage("hold",{channel:t},e)},unhold:function(t,e){this._sendMessage("unhold",{channel:t},e)},_sendMessage:function(t,e,i){var r={msgdata:{type:t}};n.extend(r.msgdata,e),this._connection.send(r,i)},_subscribed:!1,isSubscribed:function(){return this._subscribed},_needSubscribe:!1,subscribe:function(){this._needSubscribe=!0,this._integrationService.isReady()&&this._subscribe()},_subscribe:function(){this._needSubscribe&&(o.info("Send subscription"),this._subscribed=!0,this._sendMessage("subscribe",{event:"calls"}))},_onConnectedCollaboration:function(){this._subscribe()},_onSetCalls:function(t){o.info("Received calls:",t),this.reset(t)},_onUpdateCall:function(t){o.info("Update call:",t);var e=this.get(t.channel);if(e)if(e.set(t),"up"===t.state){var n=e.previousAttributes().state;"ring"===n&&"incoming"===t.direction?this.trigger("answer",t):"hold"===n&&this.trigger("unhold",t)}else"hold"===t.state&&this.trigger("hold",t)},_onRemoveCall:function(t){o.info("Removed call:",t);var e=this.get(t.channel);e&&(this.remove(e),this.trigger("hangup",t))},_onAddCall:function(t){o.info("Added call:",t),this.get(t.channel)||this.add(t)}}))})}).call(e,n(1))},function(t,e,n){!function(e,i){t.exports=i(n(2),n(0))}(0,function(t,e){"use strict";return e.mixinCompositeModel=function(e){var n=e.set,i=e.toJSON;return t.extend(e,{makeComposite:function(t){for(var e in this.composite)this.get(e).on("all",this._triggerChildEvent.bind(this,e),this)},set:function(t,e){for(var i in this.composite)if(t[i]){var r=this.get(i);r?(r.set(t[i],e),delete t[i]):t[i]=new this.composite[i](t[i])}return n.call(this,t,e)},_triggerChildEvent:function(){var t=arguments[0],e=Array.from(arguments);e=e.slice(1),e[0]=e[0].split(":"),e[0].splice(1,0,t),e[0]=e[0].join(":"),e.splice(1,0,this),this.trigger.apply(this,e),"change"==arguments[1]&&this.trigger("change",this,e[e.length-1])},toJSON:function(t){var e=i.call(this,t);for(var n in this.composite){var r=this.get(n);r&&(e[n]=r.toJSON())}return e}})},e.mixinCompositeModel})},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(15),n(2),n(0))}(0,function(t,n,i){"use strict";function r(t){this.initialize(t)}var o=e.get("Connector");return n.extend(r.prototype,i.Events,{_options:{debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:5e3,reconnectDecay:1,timeoutInterval:3e3,maxReconnectAttempts:1},_authData:null,_connection:null,_requestsCallback:{},_isInstalled:!1,_isConnected:!1,_isAuthorized:!1,_requestTimeout:12e4,_requestTimer:null,_currentDefaultPortIndex:0,_defaultPort:[8888,8889,8890],initialize:function(t){o.info("Initialize",t),n.extend(this._options,t);var e=window.localStorage.getItem("Wildix.IntegrationService.Port");e?this.getConnection(e):this.getConnection()},getConnection:function(e){if(e||(e=this._defaultPort[this._currentDefaultPortIndex]),null===this._connection){var n="wss://wildixintegration.eu:"+e+"/";this._connection=new t(n,null,this._options),this._connection.onconnecting=this._onConnectingWS.bind(this),this._connection.onopen=this._onOpenWS.bind(this),this._connection.onerror=this._onErrorWS.bind(this),this._connection.onmessage=this._onMessageWS.bind(this),this._connection.onclose=this._onCloseWS.bind(this)}return this._connection},setAuthData:function(t){this._authData=t},abort:function(){this._connection.onconnecting=function(t){},this._connection.onopen=function(t){},this._connection.onerror=function(t){},this._connection.onmessage=function(t){},this._connection.onclose=function(t){},this._connection.close(),this._connection=null,this._isConnected=!1,this._isAuthorized=!1},isInstalled:function(){return this._isInstalled},isConnected:function(){return this._isConnected},isAuthorized:function(){return this._isAuthorized},isReady:function(){return!!(this.isInstalled()&&this.isConnected()&&this.isAuthorized())},reconnect:function(){this.getConnection().refresh()},connect:function(){this.getConnection().open()},send:function(t,e,i){if(this.isConnected()&&t){t.hasOwnProperty("message")||(t=n.extend({},{message:"E_"+this._authData.app},t)),t.hasOwnProperty("id")||(t.id=this._generateID()),e&&((null===i||void 0===i||i<0)&&(i=this._requestTimeout),this._requestsCallback[t.id]={callback:e,message:t,timeoutAt:Date.now()+i},this._checkRequestTimeout());var r=JSON.stringify(t);return this.getConnection().send(r)}},_getCurrentPort:function(){return this._connection.url.match(/[^\d]+(\d+).*/)[1]},_currentCandidat:-1,_connectToNextCandidat:function(){this._currentCandidat++,this._getCandidates(function(t){t[this._currentCandidat]?(this.abort(),this.getConnection(t[this._currentCandidat])):(this.abort(),this._currentCandidat=0,this._candidates=null)}.bind(this))},_candidates:null,_getCandidates:function(t){if(t=t||function(){},null===this._candidates){var e={message:"M_WISERVICE",msgdata:{command:"candidates"}};this.send(e,function(e){e&&e.candidates&&(this._candidates=e.candidates,t(this._candidates))}.bind(this))}else t(this._candidates)},_autorize:function(){if(!this.isConnected())return null;if(!this._authData)return null;var t={message:"M_WISERVICE",msgdata:{command:"authorize",msgdata:this._authData}};this.send(t,function(t){t&&t.status&&"rejected"==t.status?(o.info("authorization rejected",t),this._connectToNextCandidat()):(window.localStorage.setItem("Wildix.IntegrationService.Port",this._getCurrentPort()),this._isAuthorized=!0,this._ready())}.bind(this))},_ready:function(){this.trigger("ready",this)},_checkRequestTimeout:function(){this._requestTimer||(this._requestTimer=setInterval(function(){for(var t in this._requestsCallback)if(this._requestsCallback.hasOwnProperty(t)){var e=this._requestsCallback[t];e.timeoutAt&&e.timeoutAt<=Date.now()&&(this.trigger("requesttimeout",e),delete this._requestsCallback[t])}}.bind(this),100))},_generateID:function(t){t||(t=32);for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},_onConnectingWS:function(t){this._isConnected=!1,this.trigger("connecting",this)},_onOpenWS:function(t){this._isInstalled=!0,this._isConnected=!0,this.getConnection().maxReconnectAttempts=null,this.trigger("connected",this),this._autorize()},_onErrorWS:function(t,e){null===this._candidates&&this._defaultPort[this._currentDefaultPortIndex+1]?(this._getCurrentPort()==this._defaultPort[this._currentDefaultPortIndex]&&this._currentDefaultPortIndex++,this.abort(),this.getConnection()):(this.abort(),this.trigger("error",this))},_onMessageWS:function(t){var e=null;if(t.hasOwnProperty("data")&&t.data)try{e=JSON.parse(t.data)}catch(t){o.error("Bad message",t)}if(e&&e.hasOwnProperty("message")){switch(e.message.substr(0,2)){case"E_":e.type="event";break;case"R_":e.type="response";break;case"C_":e.type="chunked";break;default:e.type="message"}e.application=e.message.substr(2),e.application=e.application.toLowerCase()}e&&e.hasOwnProperty("id")&&"response"==e.type&&this._requestsCallback.hasOwnProperty(e.id)&&(this._requestsCallback[e.id].hasOwnProperty("callback")&&this._requestsCallback[e.id].callback(e.msgdata),delete this._requestsCallback[e.id]),this.trigger(e.type+":"+e.application,e)},_onCloseWS:function(t){this._isConnected&&(this._isConnected=!1,o.error("WS closed",t),this.trigger("close",this))}}),r})}).call(e,n(1))},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(0))}(0,function(t){"use strict";var n=e.get("Location");return t.Model.extend({defaults:{address:"",lat:"",lng:""},initialize:function(){n.info("initialize")}})})}).call(e,n(1))},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(0))}(0,function(t){"use strict";var n=e.get("Presence");return t.Model.extend({defaults:{type:"unavailable",show:"",status:"",deviceShow:"",until:""},initialize:function(){n.info("initialize")},isAvailable:function(){return"available"==this.get("type")},isUnavailable:function(){return"unavailable"==this.get("type")},getFormattedUntil:function(){return this.get("until")&&""!=this.get("until")?this.get("until").format("dd/mm/yyyy HH:MM"):""}})})}).call(e,n(1))},function(t,e,n){(function(e){!function(e,i){t.exports=i(n(2),n(0),n(12),n(11),n(4))}(0,function(t,n,i,r,o){"use strict";var s=e.get("User"),a=n.Model.extend({composite:{presence:i,call:o,location:r},defaults:{email:"",extension:"",faxNumber:"",id:"",language:"",mobilePhone:"",name:"",officePhone:"",picture:"",presence:null,location:null,call:null},idAttribute:"id",initialize:function(t,e){s.info("initialize"),this.makeComposite(e)}});return n.mixinCompositeModel(a.prototype),a})}).call(e,n(1))},function(t,e,n){n(9),n(7),n(6),n(8),t.exports=n(3)},function(t,e,n){var i,r,o;!function(n,s){r=[],i=s,void 0!==(o="function"==typeof i?i.apply(e,r):i)&&(t.exports=o)}(0,function(){function t(e,n,i){function r(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}var o={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null};i||(i={});for(var s in o)void 0!==i[s]?this[s]=i[s]:this[s]=o[s];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var a,c=this,u=!1,l=!1,h=document.createElement("div");h.addEventListener("open",function(t){c.onopen(t)}),h.addEventListener("close",function(t){c.onclose(t)}),h.addEventListener("connecting",function(t){c.onconnecting(t)}),h.addEventListener("message",function(t){c.onmessage(t)}),h.addEventListener("error",function(t){c.onerror(t)}),this.addEventListener=h.addEventListener.bind(h),this.removeEventListener=h.removeEventListener.bind(h),this.dispatchEvent=h.dispatchEvent.bind(h),this.open=function(e){if(a=new WebSocket(c.url,n||[]),e){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else h.dispatchEvent(r("connecting")),this.reconnectAttempts=0;(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",c.url);var i=a,o=setTimeout(function(){(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",c.url),l=!0,i.close(),l=!1},c.timeoutInterval);a.onopen=function(n){clearTimeout(o),(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onopen",c.url),c.protocol=a.protocol,c.readyState=WebSocket.OPEN,c.reconnectAttempts=0;var i=r("open");i.isReconnect=e,e=!1,h.dispatchEvent(i)},a.onclose=function(n){if(clearTimeout(o),a=null,u)c.readyState=WebSocket.CLOSED,h.dispatchEvent(r("close"));else{c.readyState=WebSocket.CONNECTING;var i=r("connecting");i.code=n.code,i.reason=n.reason,i.wasClean=n.wasClean,h.dispatchEvent(i),e||l||((c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onclose",c.url),h.dispatchEvent(r("close")));var o=c.reconnectInterval*Math.pow(c.reconnectDecay,c.reconnectAttempts);setTimeout(function(){c.reconnectAttempts++,c.open(!0)},o>c.maxReconnectInterval?c.maxReconnectInterval:o)}},a.onmessage=function(e){(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",c.url,e.data);var n=r("message");n.data=e.data,h.dispatchEvent(n)},a.onerror=function(e){(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onerror",c.url,e),h.dispatchEvent(r("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(a)return(c.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","send",c.url,e),a.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(t,e){void 0===t&&(t=1e3),u=!0,a&&a.close(t,e)},this.refresh=function(){a&&a.close()}}if("WebSocket"in window)return t.prototype.onopen=function(t){},t.prototype.onclose=function(t){},t.prototype.onconnecting=function(t){},t.prototype.onmessage=function(t){},t.prototype.onerror=function(t){},t.debugAll=!1,t.CONNECTING=WebSocket.CONNECTING,t.OPEN=WebSocket.OPEN,t.CLOSING=WebSocket.CLOSING,t.CLOSED=WebSocket.CLOSED,t})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(e,n){e.exports=t}])});
//# sourceMappingURL=Wildix.IntegrationService.min.js.map